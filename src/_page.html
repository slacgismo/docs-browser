<HTML>

<HEAD>
<LINK rel="stylesheet" type="text/css" href="_theme.css" />
<SCRIPT LANGUAGE="Javascript" SRC="_defaults.js"></SCRIPT>
<SCRIPT LANGUAGE="Javascript" SRC="_config.js"></SCRIPT>
<SCRIPT LANGUAGE="Javascript">
    window.MathJax = {
        tex2jax: {
            inlineMath: [["$","$"],["\\(","\\)"]],
            displayMath: [["$$","$$"],["\\[","\\]"]],
            processEscapes: true
        }
    };
</SCRIPT>
<SCRIPT SRC="https://polyfill.io/v3/polyfill.min.js?features=es6"></SCRIPT>
<SCRIPT ID="MathJax-script" SRC="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript">
    function load_markdown(url)
    {
        var r = new XMLHttpRequest();
        r.open('GET',url,false);
        r.send(null);
        if ( r.status == 200 )
        {
            var rr = new XMLHttpRequest();
            rr.open('POST','https://api.'+host+'/markdown/raw',false);
            if ( github_authorization_token != null )
            {
                rr.setRequestHeader("Authorization","token " + github_authorization_token);
            }
            rr.send(r.responseText);
            if ( rr.status == 200 )
            {
                var re = /\[\[[-A-Za-z_ 0-9\/]+\]\]/g;
                function to_url(tag)
                {
                    tag = tag.substr(2,tag.length-4).trim();
                    if ( tag.charAt(0) == '/' )
                        ref = '/' + (tag.charAt(1).toUpperCase() + tag.slice(2)).replace(' ','-');
                    else
                        ref = '/' + (tag.charAt(0).toUpperCase() + tag.slice(1)).replace(' ','-');
                    return "<A HREF=\"" + location.origin + location.pathname + "?owner=" + owner + "&project=" + project + "&branch=" + branch + "&doc=" + ref + ".md\">" + tag + "</A>";
                }
                var ro = re[Symbol.replace](rr.responseText,to_url);
                document.writeln(ro);
            }
            else if ( rr.status == 403 )
            {
                throw ('Unauthenticated access rate limited.');
            }
            else
            {                
                throw ('<FONT COLOR=RED>ERROR ' + rr.status + ' ['+url+'] ' + rr.responseText + '</FONT><BR/>');
            }
        }
        else if ( r.status == 403 )
        {
            throw ('Unauthenticated access rate limited.');
        }
        else if ( r.status == 404 )
        {
            throw ('Document not found.');
        }
        else
        {
            throw ('<FONT COLOR=RED>ERROR ' + r.status + ' ['+url+'] ' + r.responseText + '</FONT><BR/>');
        }
    }    
</SCRIPT>
</HEAD>

<BODY>

<SCRIPT LANGUAGE="JavaScript">
    var query = new URLSearchParams(window.location.search);
    var href = location.origin + location.pathname.substring(0,location.pathname.lastIndexOf('/')+1);
    // TODO: The replacement of <name>.com -> raw.<name>usercontent.com is probably not general, but works for github.com.
    //       Suggest using a config.js on the host to implement this translation.
    var base = 'https://' + default_gethost + '/' + owner + '/' + project + '/' + branch + '/docs';
</SCRIPT>

Source document:
<SCRIPT LANGUAGE="JavaScript">
    url = 'https://'+host+'/'+owner+'/'+project+'/tree/'+branch+'/docs' + doc;
    document.write('<A TARGET="_new" ID="source" HREF="' + url + '">' + url + '</A>');
</SCRIPT>

<SCRIPT LANGUAGE="JavaScript">
    document.writeln('<DIV ID="header" CLASS="header">')
    try 
    { 
        load_markdown(base+'/_header.md') ;
    } 
    catch (e) 
    {
    }
    document.writeln('</DIV>');
    document.writeln('<DIV ID="page" CLASS="page">')
    try 
    {        
        load_markdown(base+doc);
    }
    catch (msg)
    {
        document.writeln("<FONT COLOR=RED>" + msg + "</FONT>");
    }
    document.writeln('</DIV>');
    document.writeln('<DIV ID="footer" CLASS="footer">')
    try 
    { 
        load_markdown(base+'/_footer.md') 
    } 
    catch (e) 
    {
        load_markdown(base.replace('/docs','')+'/COPYRIGHT') 
    }
    document.writeln('</DIV>');
</SCRIPT>

</BODY>

</HTML>